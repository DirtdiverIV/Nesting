<h1>Formulario de Venta/Alquiler</h1>

<form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" *ngIf="showForm">
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="propertyTypeDropdown"
          data-bs-toggle="dropdown" aria-expanded="false">
          {{ selectedPropertyType }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="propertyTypeDropdown">
          <li *ngFor="let housetype of houseTypes">
            <a class="dropdown-item" (click)="selectPropertyType(housetype)">
              {{ housetype }}
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="transactionTypeDropdown"
          data-bs-toggle="dropdown" aria-expanded="false">
          {{ selectedTransactionType }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="transactionTypeDropdown">
          <li *ngFor="let type of types">
            <a class="dropdown-item" (click)="selectTransactionType(type)">{{ type }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="cityDropdown" data-bs-toggle="dropdown"
          aria-expanded="false">
          {{ getCityValue() }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="cityDropdown">
          <li *ngFor="let city of cities">
            <a class="dropdown-item" (click)="selectCity(city.name)">{{ city.name }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="postalCodeDropdown"
          data-bs-toggle="dropdown" [disabled]="!propertyForm.get('city')?.value" aria-expanded="false">
          {{ getPostalCodeValue() }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="postalCodeDropdown">
          <li>
            <a class="dropdown-item" (click)="selectPostalCode('')">Código postal</a>
          </li>
          <li *ngFor="let code of filteredPostalCodes">
            <a class="dropdown-item" (click)="selectPostalCode(code)">{{ code }}</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="bedroomsDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ selectedBedrooms }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="bedroomsDropdown">
          <li>
            <a class="dropdown-item" (click)="selectBedrooms('0')">Habitaciones</a>
          </li>
          <li *ngFor="let room of bedroomsOptions.slice(1)">
            <a class="dropdown-item" (click)="selectBedrooms(room)">{{ room }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="bathroomsDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ selectedBathrooms }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="bathroomsDropdown">
          <li>
            <a class="dropdown-item" (click)="selectBathrooms('0')">Baños</a>
          </li>
          <li *ngFor="let bath of bathroomsOptions.slice(1)">
            <a class="dropdown-item" (click)="selectBathrooms(bath)">{{ bath }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <input
        type="text"
        class="form-control custom-input"
        placeholder="Superficie"
        formControlName="size"
      />
    </div>
    <div class="col-12 col-lg-3">
      <input
        type="text"
        class="form-control custom-input"
        placeholder="Importe €"
        formControlName="price"
      />
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-6">
      <input type="text" class="custom-input move-left" placeholder="Dirección">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" aria-label="Checkbox for following text input">
        <label class="form-check-label" for="invalidCheck2">Publicar dirección</label>
        <div class="btupload">
          <app-file-upload></app-file-upload>
        </div>
      </div>
    </div>
    <div class="col-12 col-lg-6">
      <input type="text" class="custom-input move-right" placeholder="Titulo" id="tituloInput">
      <textarea id="description" name="description" rows="2" class="form-control" placeholder="Descripción..."></textarea>
      <app-previewbtn></app-previewbtn>
     </div>
    </div>


<div id="liveAlertPlaceholder">
  <div *ngIf="alertMessage" class="alert alert-{{ alertType }} alert-dismissible" role="alert">
    <div>{{ alertMessage }}</div>
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
</div>
